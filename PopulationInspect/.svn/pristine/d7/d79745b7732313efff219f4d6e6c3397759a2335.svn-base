<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>登陆</title>
<style>
*{
	padding: 0;
	margin: 0;
}
body,html{
	width:100%;
	height:100%;
	min-height: 700px;
}
.wrapper {
    width:100%;
	height:100%;
	padding-top:1px; 
    background:rgb(3,96,163);
}
.main{
	width: 823px;
	height: 479px;
	margin:60px auto;
	padding-top: 1px;
	background-image: url(images/loginbar.jpg);
	background-size: cover;
}
.loginBox {
    background-color: #FEFEFE;
    border: 1px solid #BfD6E1;
    border-radius: 5px;
    color: #444;
    font: 14px 'Microsoft YaHei','微软雅黑';
    margin: 0 auto;
    margin-top: 150px;
    width: 350px
}
.loginBox .loginBoxCenter {
    border-bottom: 1px solid #DDE0E8;
    padding: 15px;
}
.loginBox .loginBoxCenter p {
    margin-bottom: 10px
}
.loginBox .loginBoxButtons {
    background-color: #F0F4F6;
    border-top: 1px solid #FFF;
    border-bottom-left-radius: 5px;
    border-bottom-right-radius: 5px;
    line-height: 28px;
    overflow: hidden;
    padding: 10px 24px;
    vertical-align: center;
}
.loginBox .loginInput {
    border: 1px solid #D2D9dC;
    border-radius: 2px;
    color: #444;
    font: 12px 'Microsoft YaHei','微软雅黑';
    padding: 8px 14px;
    margin-bottom: 8px;
    width: 280px;
}
.loginBox .loginInput:fcous {
    border: 1px solid #B7D4EA;
    box-shadow: 0 0 8px #B7D4EA;
}
.loginBox .loginBtn {
    background-image: linear-gradient(to bottom, #B5DEF2, #85CFEE);
    border: 1px solid #98CCE7;
    border-radius: 20px;
    box-shadow:inset rgba(255,255,255,0.6) 0 1px 1px, rgba(0,0,0,0.1) 0 1px 1px;
    color: #FFF;
    cursor: pointer;
    float: right;
    font: bold 13px Arial;
    padding: 5px 14px;
    margin-left:10px;
}
.error{
	display:inline-block;
	font-size:10px;
	color:red;
	width:150px;
	height:15px;
}
	</style>
</head>
<body>
<div class="wrapper">
	<div class="main">
		<form id="login"  >
		    <div class="loginBox">
		        <div class="loginBoxCenter">
		            <p><label for="poli_code">警号：</label></p>
		            <p><input type="text" id="poli_code" name="poli_code" class="loginInput" autofocus="autofocus" required="required" autocomplete="off" placeholder="请输入警号" value="" /></p>
		            <p><label for="poli_pwd">密码：</label></p>
		            <p><input type="password" id="poli_pwd" name="poli_pwd" class="loginInput" required="required" placeholder="请输入密码" value="" /></p>
		            <p><input type="hidden" id="ip" name="ip"></p>
		            <span class="error" id="error"></span>
		        </div>
		        <div class="loginBoxButtons">
		            <input id="remember" type="checkbox" name="remember" />
		            <label for="remember">记住登录状态</label>
		            <button id="loginBtn" class="loginBtn" type="button">登录</button>
		            <button class="loginBtn" type="reset">重置</button>
		        </div>
		    </div>
	    </form>
    </div>
</div>
</body>
<script src="js/jquery-1.11.0.min.js"></script>
<script src="js/police.js"></script>
<script language="javascript" type="text/javascript" src="http://pv.sohu.com/cityjson?ie=utf-8"></script>

<script type="text/javascript">
$('#ip').val(returnCitySN.cip);
	$(function(){
		$('#loginBtn').click(function(){
			$.ajax({
				url:'http://localhost:8080/PopulationInspect/police/login',
				type:'POST',
				data:{
					poli_code:$('#poli_code').val(),
					poli_pwd:$('#poli_pwd').val(),
					ip:returnCitySN.cip
				},
				success:function(data){
				 //console.log(data);
				storage.setItem('police-info',data);
				var datas = eval('('+data+')');
					if(datas.resultCode==1){
						window.location.href="index.html";
					}else if(datas.resultCode==0){
						$('#error').html("警官号错误！");
					}else if(datas.resultCode==2){
						$('#error').html("密码错误！");
					}else if(datas.resultCode==3){
						$('#error').html("账号已删除！");
					}
				},
				error:function(err){
					alert('发生了错误：'+err.status);
					console.table(err);
				}
			});
		});
		
	});
</script>
</html>