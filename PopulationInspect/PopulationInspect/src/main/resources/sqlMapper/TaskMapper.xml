<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="edu.hdu.lab.checkIn.mapper.TaskMapper">
	<resultMap id="TaskResult" type="edu.hdu.lab.checkIn.model.Task">
		<id property="taskId" jdbcType="INTEGER" column="taskId"/>
		<result property="policeId" jdbcType="VARCHAR" column="policeId"/>
		<result property="longitude" jdbcType="FLOAT" column="longitude"/>
		<result property="latitude" jdbcType="FLOAT" column="latitude"/>
		<result property="deadLine" jdbcType="VARCHAR" column="deadLine"/>
		<result property="community" jdbcType="VARCHAR" column="community"/>
		<result property="room" jdbcType="VARCHAR" column="room"/>
		<result property="type" jdbcType="VARCHAR" column="type"/>
		<result property="content" jdbcType="VARCHAR" column="content"/>
		<result property="state" jdbcType="INTEGER" column="state"/>
	</resultMap>
	  
	<select id="queryAllTask" resultMap="TaskResult">
		SELECT * FROM Task_t ORDER BY taskId;
	</select>
	
	<select id="mylogin" resultType="java.lang.String" parameterType="java.lang.String">
    	SELECT POLI_PASS FROM police where POLI_CODE = #{username}
	</select>
  
	<select id="queryTaskById" resultMap="TaskResult" parameterType="int">
    	SELECT * FROM Task_t where taskId = #{taskId}
	</select>
   
	<insert id="addTask" parameterType="edu.hdu.lab.checkIn.model.Task">
		insert into Task_t (taskId,policeId,policeName,longitude,latitude,deadLine,community,room,type,content,state) values(#{taskId},#{policeId},#{policeName},#{longitude},#{latitude},#{deadLine},#{community},#{room},#{type},#{content},#{state});
	</insert>
	
	<update id="completeTask" parameterType="int">
		update Task_t set state = 1 where taskId = #{taskId};
	</update>
	
	<select id="deleteTask"  parameterType="int">
		delete from Task_t where taskId=#{taskId}
	</select>
</mapper>